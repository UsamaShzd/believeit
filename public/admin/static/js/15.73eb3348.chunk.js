(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{382:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(361);a.a=function(e){return r.a.createElement("div",{className:"header bg-gradient-info pb-8 pt-5 pt-md-8"},r.a.createElement(l.a,{fluid:!0},e.children))}},383:function(e,a,t){"use strict";var n=t(75),r=t(0),l=t.n(r),c=t(357),o=t(388),s=t(360),i=t(74);a.a=function(e){var a=e.name,t=e.label,r=Object(n.a)(e,["name","label"]),u=Object(i.c)(),m=u.values,d=u.errors,b=u.touched,p=u.setFieldValue,v=m[a],f=b[a]&&d[a],g=" form-control form-control-alternative text-black";return f&&(g+=" border border-danger"),l.a.createElement(c.a,null,t&&l.a.createElement(o.a,{className:"form-control-label"},t),l.a.createElement(s.a,Object.assign({},r,{className:g,autoComplete:"off",value:v,onChange:function(e){p(a,e.target.value)}})),f&&l.a.createElement("div",{className:"alert alert-danger"},f))}},385:function(e,a,t){"use strict";var n=t(25),r=t(75),l=t(0),c=t.n(l),o=t(357),s=t(388),i=t(360),u=t(74);a.a=function(e){var a=e.name,t=e.label,l=e.className,m=e.options,d=void 0===m?[]:m,b=e.placeholder,p=Object(r.a)(e,["name","label","className","options","placeholder"]),v=Object(u.c)(),f=v.values,g=v.errors,E=v.touched,h=v.setFieldValue,y=f[a],x=E[a]&&g[a],N=l+" form-control form-control-alternative text-black";return x&&(N+=" border border-danger"),b&&(d=[{label:b||"",value:""}].concat(Object(n.a)(d))),c.a.createElement(o.a,null,t&&c.a.createElement(s.a,{className:"form-control-label"},t),c.a.createElement(i.a,Object.assign({},p,{type:"select",className:N,style:{color:"black"},value:y,onChange:function(e){console.log(e.target.value),h(a,e.target.value)}}),d.map(function(e,a){return c.a.createElement("option",{key:a,value:e.value},e.label)})),x&&c.a.createElement("div",{className:"alert alert-danger"},x))}},487:function(e,a,t){"use strict";t.r(a);var n=t(34),r=t.n(n),l=t(64),c=t(63),o=t(0),s=t.n(o),i=t(187),u=t(361),m=t(364),d=t(386),b=t(365),p=t(382),v=t(10),f=t(49),g=t(38),E=t(74),h=t(77),y=t(383),x=t(385),N=t(75),j=t(357),w=t(388),O=t(463),k=t(467),C=t.n(k),V={mediaEmbed:{previewsInData:!0}},S=function(e){var a=e.label,t=e.name,n=e.className,r=void 0===n?"":n,l=Object(N.a)(e,["label","name","className"]),c=Object(E.c)(),o=c.values,i=c.errors,u=c.touched,m=c.setFieldValue,d=o[t],b=u[t]&&i[t],p=r+"";return b&&(p+=" border border-danger"),s.a.createElement(j.a,null,a&&s.a.createElement(w.a,{className:"form-control-label"},a),s.a.createElement("div",{className:p},s.a.createElement(O.CKEditor,Object.assign({editor:C.a,config:V,activeClass:"border border-primary",data:d},l,{onChange:function(e,a){m(t,a.getData())}}))),b&&s.a.createElement("div",{className:"alert alert-danger"},b))},P=t(473),F=function(e){var a=e.onChange,t=void 0===a?function(){}:a,n=e.imagePreview,r=void 0===n?"":n,l=Object(o.useState)(r),i=Object(c.a)(l,2),u=i[0],m=i[1];return s.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:"5px"}},s.a.createElement(P.a,{onDrop:function(e){var a=e[0],n=new FileReader;n.readAsDataURL(a),n.onloadend=function(e){m(n.result)}.bind(void 0),t&&t(e)}},function(e){var a=e.getRootProps,t=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",a(),s.a.createElement("input",t()),s.a.createElement("div",{style:{minHeight:"180px",minWidth:"180px",maxHeight:"300px",maxWidth:"400px",border:"3px dashed #ccc",display:"flex",alignItems:"center",justifyContent:"center"}},null!==u?s.a.createElement("img",{src:u,className:"w-100"}):s.a.createElement("p",{style:{textAlign:"center",color:"#ccc",maxWidth:"200px"}},"Drag 'n' drop image here, or click to select image"))))}))};a.default=function(e){var a=e.match,t=e.history,n=Object(o.useState)({title:"",type:"youtube_video",youtubeVideo:"",image:"",description:"",htmlContent:"",_id:""}),N=Object(c.a)(n,2),j=N[0],w=N[1],O=Object(o.useState)(null),k=Object(c.a)(O,2),C=k[0],V=k[1],P=a.params.identifier;Object(o.useEffect)(function(){"add"!==P&&P!==j._id&&_(P)},[P]);var _=function(){var e=Object(l.a)(r.a.mark(function e(a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get({url:"/posts/"+P});case 3:n=e.sent,w(n.data),e.next=16;break;case 7:e.prev=7,e.t0=e.catch(0),e.t1=e.t0.response.status,e.next=404===e.t1?12:15;break;case 12:return Object(f.a)("Post not found!"),t.replace(v.b+"/posts/"),e.abrupt("break",16);case 15:Object(f.a)("Something went wrong!");case 16:case"end":return e.stop()}},e,null,[[0,7]])}));return function(a){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(r.a.mark(function e(a,n){var l,c,o,s,i,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.setSubmitting,c=n.setErrors,e.prev=1,"blog"!==a.type||null===C){e.next=9;break}return(s=new FormData).append("image",C),e.next=7,g.a.post({url:"/media/image",body:s});case 7:o=e.sent,a.image=o.data._id;case 9:if("add"!==P){e.next=17;break}return e.next=12,g.a.post({url:"/posts/",body:a});case 12:i=e.sent,w(i.data),t.replace(v.b+"/posts/"+i.data._id),e.next=21;break;case 17:return e.next=19,g.a.put({url:"/posts/"+P,body:a});case 19:u=e.sent,w(u.data);case 21:V(null),e.next=34;break;case 24:e.prev=24,e.t0=e.catch(1),e.t1=e.t0.response.status,e.next=400===e.t1?29:404===e.t1?31:33;break;case 29:return c(e.t0.response.data.error),e.abrupt("break",34);case 31:return Object(f.a)("This post is deleted"),e.abrupt("break",34);case 33:Object(f.a)("Something went wrong!");case 34:return e.prev=34,l(!1),e.finish(34);case 37:case"end":return e.stop()}},e,null,[[1,24,34,37]])}));return function(a,t){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,null),s.a.createElement(u.a,{className:"mt--7"},s.a.createElement(m.a,{className:"shadow"},s.a.createElement(d.a,null,s.a.createElement("div",{className:"clearfix"},s.a.createElement("h2",{className:"mb-0 float-left"},"add"===P?"Add Post":j.title))),s.a.createElement(b.a,{className:"bg-secondary"},s.a.createElement(E.b,{initialValues:{title:j.title,type:j.type,htmlContent:j.htmlContent,youtubeVideo:j.youtubeVideo,description:j.description},validationSchema:h.d().shape({title:h.e().trim().min(5).max(150).required(),type:h.e().trim().required(),youtubeVideo:h.e().when("type",{is:"youtube_video",then:h.e().required()}),htmlContent:h.e().when("type",{is:"blog",then:h.e().required()})}),onSubmit:D,enableReinitialize:!0},function(e){var a=e.values,t=e.isSubmitting,n=e.submitForm,r=a.type;return s.a.createElement(E.a,null,s.a.createElement("div",{className:"row"},"blog"===r&&s.a.createElement("div",{className:"col-12"},s.a.createElement(F,{imagePreview:j.image.thumbnailUrl,onChange:function(e){V(e[0])}})),s.a.createElement("div",{className:"col-12"},s.a.createElement(y.a,{label:"Post Title",name:"title",placeholder:"Post Title..."})),s.a.createElement("div",{className:"col-12"},s.a.createElement(x.a,{name:"type",label:"Post Type",options:[{label:"Youtube Video",value:"youtube_video"},{label:"Blog",value:"blog"}]})),"youtube_video"===r&&s.a.createElement("div",{className:"col-12"},s.a.createElement(y.a,{label:"Youtube Video Id",name:"youtubeVideo",placeholder:"youtube video id"})),"blog"===r&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-12"},s.a.createElement(y.a,{label:"Description",name:"description",placeholder:"description..."})),s.a.createElement("div",{className:"col-12"},s.a.createElement(S,{label:"Content",name:"htmlContent",className:"w-100"}))),s.a.createElement("div",{className:"col-12 text-center"},s.a.createElement(i.a,{color:"primary",disabled:t,type:"submit",onClick:n},"Save"))))})))))}}}]);
//# sourceMappingURL=15.73eb3348.chunk.js.map