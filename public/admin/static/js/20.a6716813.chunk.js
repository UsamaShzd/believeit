(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{382:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(361);t.a=function(e){return r.a.createElement("div",{className:"header bg-gradient-info pb-8 pt-5 pt-md-8"},r.a.createElement(l.a,{fluid:!0},e.children))}},383:function(e,t,a){"use strict";var n=a(75),r=a(0),l=a.n(r),c=a(357),o=a(389),i=a(360),s=a(74);t.a=function(e){var t=e.name,a=e.label,r=Object(n.a)(e,["name","label"]),u=Object(s.c)(),m=u.values,d=u.errors,b=u.touched,p=u.setFieldValue,v=m[t],f=b[t]&&d[t],g=" form-control form-control-alternative text-black";return f&&(g+=" border border-danger"),l.a.createElement(c.a,null,a&&l.a.createElement(o.a,{className:"form-control-label"},a),l.a.createElement(i.a,Object.assign({},r,{className:g,autoComplete:"off",value:v,onChange:function(e){p(t,e.target.value)}})),f&&l.a.createElement("div",{className:"alert alert-danger"},f))}},385:function(e,t,a){"use strict";var n=a(25),r=a(75),l=a(0),c=a.n(l),o=a(357),i=a(389),s=a(360),u=a(74);t.a=function(e){var t=e.name,a=e.label,l=e.className,m=e.options,d=void 0===m?[]:m,b=e.placeholder,p=Object(r.a)(e,["name","label","className","options","placeholder"]),v=Object(u.c)(),f=v.values,g=v.errors,E=v.touched,h=v.setFieldValue,y=f[t],x=E[t]&&g[t],k=l+" form-control form-control-alternative text-black";return x&&(k+=" border border-danger"),b&&(d=[{label:b||"",value:""}].concat(Object(n.a)(d))),c.a.createElement(o.a,null,a&&c.a.createElement(i.a,{className:"form-control-label"},a),c.a.createElement(s.a,Object.assign({},p,{type:"select",className:k,style:{color:"black"},value:y,onChange:function(e){console.log(e.target.value),h(t,e.target.value)}}),d.map(function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)})),x&&c.a.createElement("div",{className:"alert alert-danger"},x))}},492:function(e,t,a){"use strict";a.r(t);var n=a(34),r=a.n(n),l=a(64),c=a(63),o=a(0),i=a.n(o),s=a(187),u=a(361),m=a(364),d=a(386),b=a(365),p=a(382),v=a(10),f=a(49),g=a(38),E=a(74),h=a(77),y=a(383),x=a(385),k=(a(75),a(357),a(389),a(465),a(469),a(474)),w=function(e){var t=e.onChange,a=void 0===t?function(){}:t,n=e.imagePreview,r=void 0===n?"":n,l=Object(o.useState)(r),s=Object(c.a)(l,2),u=s[0],m=s[1];return i.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:"5px"}},i.a.createElement(k.a,{onDrop:function(e){var t=e[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(e){m(n.result)}.bind(void 0),a&&a(e)}},function(e){var t=e.getRootProps,a=e.getInputProps;return i.a.createElement("section",null,i.a.createElement("div",t(),i.a.createElement("input",a()),i.a.createElement("div",{style:{minHeight:"180px",minWidth:"180px",maxHeight:"300px",maxWidth:"400px",border:"3px dashed #ccc",display:"flex",alignItems:"center",justifyContent:"center"}},null!==u?i.a.createElement("img",{src:u,className:"w-100"}):i.a.createElement("p",{style:{textAlign:"center",color:"#ccc",maxWidth:"200px"}},"Drag 'n' drop image here, or click to select image"))))}))};t.default=function(e){var t=e.match,a=e.history,n=Object(o.useState)({title:"",type:"youtube_video",youtubeVideo:"",image:"",description:"",link:"",_id:""}),k=Object(c.a)(n,2),N=k[0],j=k[1],O=Object(o.useState)(null),S=Object(c.a)(O,2),V=S[0],P=S[1],C=t.params.identifier;Object(o.useEffect)(function(){"add"!==C&&C!==N._id&&_(C)},[C]);var _=function(){var e=Object(l.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get({url:"/posts/"+C});case 3:n=e.sent,j(n.data),e.next=16;break;case 7:e.prev=7,e.t0=e.catch(0),e.t1=e.t0.response.status,e.next=404===e.t1?12:15;break;case 12:return Object(f.a)("Post not found!"),a.replace(v.b+"/posts/"),e.abrupt("break",16);case 15:Object(f.a)("Something went wrong!");case 16:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(r.a.mark(function e(t,n){var l,c,o,i,s,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.setSubmitting,c=n.setErrors,e.prev=1,"blog"!==t.type||null===V){e.next=9;break}return(i=new FormData).append("image",V),e.next=7,g.a.post({url:"/media/image",body:i});case 7:o=e.sent,t.image=o.data._id;case 9:if("add"!==C){e.next=17;break}return e.next=12,g.a.post({url:"/posts/",body:t});case 12:s=e.sent,j(s.data),a.replace(v.b+"/posts/"+s.data._id),e.next=21;break;case 17:return e.next=19,g.a.put({url:"/posts/"+C,body:t});case 19:u=e.sent,j(u.data);case 21:P(null),e.next=34;break;case 24:e.prev=24,e.t0=e.catch(1),e.t1=e.t0.response.status,e.next=400===e.t1?29:404===e.t1?31:33;break;case 29:return c(e.t0.response.data.error),e.abrupt("break",34);case 31:return Object(f.a)("This post is deleted"),e.abrupt("break",34);case 33:Object(f.a)("Something went wrong!");case 34:return e.prev=34,l(!1),e.finish(34);case 37:case"end":return e.stop()}},e,null,[[1,24,34,37]])}));return function(t,a){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null),i.a.createElement(u.a,{className:"mt--7"},i.a.createElement(m.a,{className:"shadow"},i.a.createElement(d.a,null,i.a.createElement("div",{className:"clearfix"},i.a.createElement("h2",{className:"mb-0 float-left"},"add"===C?"Add Post":N.title))),i.a.createElement(b.a,{className:"bg-secondary"},i.a.createElement(E.b,{initialValues:{title:N.title,type:N.type,link:N.link,youtubeVideo:N.youtubeVideo,description:N.description},validationSchema:h.d().shape({title:h.e().trim().min(5).max(150).required(),type:h.e().trim().required(),youtubeVideo:h.e().when("type",{is:"youtube_video",then:h.e().required()}),link:h.e().when("type",{is:"blog",then:h.e().required()})}),onSubmit:F,enableReinitialize:!0},function(e){var t=e.values,a=e.isSubmitting,n=e.submitForm,r=t.type;return i.a.createElement(E.a,null,i.a.createElement("div",{className:"row"},"blog"===r&&i.a.createElement("div",{className:"col-12"},i.a.createElement(w,{imagePreview:N.image.thumbnailUrl,onChange:function(e){P(e[0])}})),i.a.createElement("div",{className:"col-12"},i.a.createElement(y.a,{label:"Post Title",name:"title",placeholder:"Post Title..."})),i.a.createElement("div",{className:"col-12"},i.a.createElement(x.a,{name:"type",label:"Post Type",options:[{label:"Youtube Video",value:"youtube_video"},{label:"Blog",value:"blog"}]})),"youtube_video"===r&&i.a.createElement("div",{className:"col-12"},i.a.createElement(y.a,{label:"Youtube Video Id",name:"youtubeVideo",placeholder:"youtube video id"})),"blog"===r&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12"},i.a.createElement(y.a,{label:"Description",name:"description",placeholder:"description..."})),i.a.createElement("div",{className:"col-12"},i.a.createElement(y.a,{label:"Link",name:"link",placeholder:"Link"}))),i.a.createElement("div",{className:"col-12 text-center"},i.a.createElement(s.a,{color:"primary",disabled:a,type:"submit",onClick:n},"Save"))))})))))}}}]);
//# sourceMappingURL=20.a6716813.chunk.js.map